{% extends "accounts/base.html" %} {% load crispy_forms_tags %}


{% block title %} Tuxconfig {% endblock %}
{%  load static %}



<link rel="stylesheet" href="{% static 'flags/sprite.css' %}">
{%  block heading %} <h3>Dashboard:</h3> {% endblock %}
{% block content %}


    <h1>Sign off on module:</h1>
    <form method="post">
        {{ repositories.management_form }}
        {%  for repo in repositories %}

            {%  if repo.upvotes > 4 %} <p class="alert alert-success">Verified as safe</p>
            {%  elif repo.downvotes > 4 %} <p class="alert alert-danger">Verified as unsafe</p>{%  else %}
                <p class="alert alert-warning">To be verified</p>
            {%  endif %}
            <a href="https://www.github.com/{{  repo.instance.git_username }}/{{  repo.instance.git_repo }}/commit/{{ repo.instance.git_commit }}" target="_blank" >https://www.github.com/{{  repo.instance.git_username }}/{{  repo.instance.git_repo }}/{{  repo.instance.git_commit }}</a>
            <p>Module name: {{ repo.instance.module_name }}</p>
            <p>Upvotes: {{  repo.instance.upvotes }}</p>
            <p>Downvotes: {{  repo.instance.downvotes }}</p>
            {%  for repository_url in  repo.urls %}
                {{ repository_url }}
            {% endfor %}
            {{ repo.discussion_url }}
            {{  repo.id }}


            <br>

            <button class="btn btn-primary" type="submit">Add / set discussion url.</button><br>
            <br>
            <button type="submit" value="{{  repo.instance.id }}" name="upvote">
                <img src="{% static "up_button.png" %}" />
            </button>
            <button type="submit" value="{{  repo.instance.id }}" name="downvote">
                <img src="{% static "down_button.png" %}" />
            </button>

            <br>

        {%  empty %}
            <p class="alert alert-warning">No modules to sign off right now</p>

        {%  endfor %}

        {%  csrf_token %}


    </form>



{% endblock %}
